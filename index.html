<!DOCTYPE html>
<html>
<body>
    <h2>Chat com Assistente iAFSC (Pinecone)</h2>

    <textarea id="msg" rows="4" cols="60" placeholder="Digite sua mensagem..."></textarea><br>
    <button onclick="enviar()">Enviar</button>

    <pre id="resp"></pre>

    <script>
        const API_KEY = "pcsk_47UdKu_6LUazbXmTuqzBzKuMRereEQKL4DXo17sFhW32P6Trac2nswCNbPoLbMHcMcxCPA";
        const ASSISTANT = "iasfc";

        async function enviar() {
            const userMsg = document.getElementById("msg").value;

            const body = {
                messages: [
                    { role: "user", content: userMsg }
                ],
                stream: false,
                model: "gemini-2.5-pro"
            };

            const response = await fetch(
                `https://prod-1-data.ke.pinecone.io/assistant/chat/${ASSISTANT}`,
                {
                    method: "POST",
                    headers: {
                        "Api-Key": API_KEY,
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify(body)
                }
            );

            const data = await response.json();
            
            // Exibir apenas o conteúdo
            const content = data?.message?.content || "⚠️ Erro: conteúdo não encontrado";

            document.getElementById("resp").textContent = content;
        }
    </script>
</body>
</html>
