<!DOCTYPE html>
<html>
<body>
    <h2>Chat com Assistente iAFSC (Pinecone via Cloudflare Worker)</h2>

    <textarea id="msg" rows="4" cols="60" placeholder="Digite sua mensagem..."></textarea><br>
    <button onclick="enviar()">Enviar</button>

    <pre id="resp"></pre>

    <script>
        // URL do seu Worker (substitua pelo seu endereço real)
        const WORKER_URL = "https://SEU_WORKER.workers.dev";

        async function enviar() {
            const userMsg = document.getElementById("msg").value;

            // Objeto enviado ao Worker
            const body = {
                content: userMsg
            };

            const response = await fetch(WORKER_URL, {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
            });

            const data = await response.json();

            // O worker devolve o JSON inteiro do Pinecone,
            // então acessamos da forma correta:
            const content =
                data?.message?.content ||
                "⚠️ Erro: conteúdo não encontrado no retorno do Worker";

            document.getElementById("resp").textContent = content;
        }
    </script>
</body>
</html>
